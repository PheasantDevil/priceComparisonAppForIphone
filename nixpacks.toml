[phases.setup]
nixPkgs = ["python3", "nodejs", "python3Packages.setuptools"]

[phases.install]
cmds = [
  "python3 -m ensurepip --upgrade",
  "python3 -m pip install --upgrade pip setuptools wheel",
  "python3 -m pip install -r backend/requirements.txt"
]

[phases.build]
cmds = [
  "chmod +x backend/build-and-copy.sh",
  "backend/build-and-copy.sh"
]

[start]
cmd = "python backend/app.py"

[variables]
NODE_ENV = "production"
NEXT_TELEMETRY_DISABLED = "1" 